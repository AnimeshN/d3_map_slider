<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>D3: Setting path fills</title>
        <script type="text/javascript" src="d3.v4.min.js"></script>
        <style type="text/css">
            /* No style rules here yet */       
        </style>
    </head>
    <body>
        <script type="text/javascript">

            //Width and height
            // var w = 500;
            // var h = 300;

            // //Define map projection
            // var projection = d3.geoMercator()
            //                        .translate([w/2, h/2])
            //                        .scale([500]);

            // //Define path generator
            // var path = d3.geoPath()
            //                  .projection(projection);

            // //Create SVG element
            // var svg = d3.select("body")
            //             .append("svg")
            //             .attr("width", w)
            //             .attr("height", h);

            // //Load in GeoJSON data
            // d3.json("indiastate.json", function(json) {
            //     console.log(json);
            //     //Bind data and create one path per GeoJSON feature
            //     svg.selectAll("path")
            //        .data(json.features)
            //        .enter()
            //        .append("path")
            //        .attr("d", path)
            //        .style("fill", "steelblue")
            //        .attr("transform", "translate(-800,200)");


            // });

            var width  = 300;
            var height = 400;

            var svg = d3.select("body").append("svg")
                .attr("width", width).attr("height", height)

            d3.json("d_palgarh.json", function(json) {
                // create a first guess for the projection
                var center = d3.geoCentroid(json)
                var scale  = 150;
                var offset = [width/2, height/2];
                var projection = d3.geoMercator().scale(scale).center(center)
                    .translate(offset);

                // create the path
                var path = d3.geoPath().projection(projection);

                // using the path determine the bounds of the current map and use 
                // these to determine better values for the scale and translation
                var bounds  = path.bounds(json);
                var hscale  = scale*width  / (bounds[1][0] - bounds[0][0]);
                var vscale  = scale*height / (bounds[1][1] - bounds[0][1]);
                var scale   = (hscale < vscale) ? hscale : vscale;
                var offset  = [width - (bounds[0][0] + bounds[1][0])/2,
                                    height - (bounds[0][1] + bounds[1][1])/2];

                // new projection
                projection = d3.geoMercator().center(center)
                    .scale(scale).translate(offset);
                path = path.projection(projection);

                // add a rectangle to see the bound of the svg
                svg.append("rect").attr('width', width).attr('height', height)
                    .style('stroke', 'black').style('fill', 'none');

                svg.selectAll("path").data(json.features).enter().append("path")
                    .attr("d", path)
                    .style("fill", "red")
                    .style("stroke-width", "1")
                    .style("stroke", "black")
                });


        </script>
    </body>
</html>